<!DOCTYPE html>
<html>
	<head>
		<title>My Sketch</title>
		<script src="processing.min.js"></script>
	</head>
	<body>
		<script type="application/processing">
			//Declare time scope
			int number_of_years = 7;
			var Semester = "Fall";
			int Semester_id = 8;
			int bar_chart = 0;
			int line_graph = 1;
		
			var classes = "data/Release/washed-classes/cmsc-classes-washed/10";
			int As = [], Bs = [],Cs = [], Ds = [];
			int Ws = [], Fs = [], Is = [], Ps = [], NGs = [];
			
			void setup(){
				size(1900, 700);
				strokeWeight(4);
				smooth();
				frameRate(0.5);
				setData();
			}
				
			void setData(){
				As = []; Bs = []; Cs = []; Ds = [];
				Ws = []; Fs = []; Is = []; Ps = []; NGs = [];
				for(int j = 1; j <= number_of_years; j++){
					var file = classes + j + Semester_id + ".csv";
					String lines[] = loadStrings(file);
					int a=0, b=0, c=0, d=0, w=0, f=0, pass=0, I=0, ng=0;
					String p[];
					for (int i=0; i < lines.length; i++) {
						p = splitTokens(lines[i], ",");
						if(p[4] == "A") a++;
						if(p[4] == "B") b++;
						if(p[4] == "C") c++;
						if(p[4] == "D") d++;
						if(p[4] == "W") w++;
						if(p[4] == "F") f++;
						if(p[4] == "I") I++;
						if(p[4] == "P") pass++;
						if(p[4] == "NG") ng++;
					}
					As.push(a);
					Bs.push(b);
					Cs.push(c);
					Ds.push(d);
					Ws.push(w);
					Fs.push(f);
					Is.push(I);
					Ps.push(pass);
					NGs.push(ng);
					a=0; b=0; c=0; d=0; w=0; f=0; pass=0; I=0; ng=0;
				}
			}
			
			void draw(){
				background(200);
				if(line_graph == 1){
					text ("Years: " + number_of_years, 1800, 10);
					text ("add 1 | remove 1", 1800, 24);
					text ("Semester: " + Semester, 1800, 40);
					text ("previous | next", 1800, 54);
					text ("Switch to bar chart", 1800, 70);
					drawLineGraph();
				}
				if(bar_chart == 1){
					text ("Year: " + number_of_years, 1800, 10);
					text ("add 1 | remove 1", 1800, 24);
					text ("Semester: " + Semester, 1800, 40);
					text ("previous | next", 1800, 54);
					text ("Switch to line graph", 1800, 70);
					drawBarChart();
				}
			}
			
			void mousePressed(){
				if(mouseX > 1800 && mouseX < 1850 && mouseY > 15 && mouseY < 35){
					if(number_of_years < 7){
						number_of_years += 1;
					}
					setData();
				}
				else if(mouseX > 1850 && mouseY > 15 && mouseY < 35){
					if(number_of_years > 1){
						number_of_years -= 1;
					}
					setData();
				}
				else if(mouseX > 1800 && mouseX < 1855 && mouseY > 40 && mouseY < 60){
					if(Semester_id == 8){
						Semester = "Summer";
						Semester_id = 6;
					}
					else if(Semester_id == 6){
						Semester = "Spring";
						Semester_id = 2;
					}
					else if(Semester_id == 2){
						Semester = "Winter";
						Semester_id = 0;
					}
					else if(Semester_id == 0){
						Semester = "Fall";
						Semester_id = 8;
					}
					setData();
				}
				else if(mouseX > 1855 && mouseY > 40 && mouseY < 60){
					if(Semester_id == 2){
						Semester = "Summer";
						Semester_id = 6;
					}
					else if(Semester_id == 0){
						Semester = "Spring";
						Semester_id = 2;
					}
					else if(Semester_id == 8){
						Semester = "Winter";
						Semester_id = 0;
					}
					else if(Semester_id == 6){
						Semester = "Fall";
						Semester_id = 8;
					}
					setData();
				}
				else if(mouseX > 1800 && mouseY > 60 && mouseY < 70){
					if(line_graph == 1){
						line_graph = 0;
						bar_chart = 1;
					}
					else{
						line_graph = 1;
						bar_chart = 0;
					}
					println(bar_chart);
				}
			}
			
			void drawBarChart(){
				String nums[] = {"A: ", "B: ", "C: ", "D: ", "F: ", "W: ", "Incomplete: ", "Pass: ", "NG: "};
				int numbers = {As[number_of_years-1], Bs[number_of_years-1], Cs[number_of_years-1],
								Ds[number_of_years-1], Ws[number_of_years-1], Fs[number_of_years-1],
								Is[number_of_years-1], Ps[number_of_years-1], NGs[number_of_years-1]};
				for (int i = 0; i < numbers.length; i++) {
					float w = map(numbers[i], 0, max(numbers), 0, width - 200);
					rect(10, (i * 25) + 5, w, 20);
					text(nums[i] + numbers[i], w + 15, (i * 25) + 20 );
				}
			}
			
			void drawLineGraph(){
				float lineWidth = (float)width/(As.length);
				fill(0, 0, 255);
				text("As", (As.length-1)*lineWidth + 30, As[As.length-1]/2 + 50);
				text("Bs", (As.length-1)*lineWidth + 40, Bs[Bs.length-1]/2 + 50);
				text("Cs", (As.length-1)*lineWidth + 50, Cs[Cs.length-1]/2 + 50);
				text("Ds", (As.length-1)*lineWidth + 60, Ds[Ds.length-1]/2 + 50);
				text("Ws", (As.length-1)*lineWidth + 70, Ws[Ws.length-1]/2 + 50);
				text("Fs", (As.length-1)*lineWidth + 60, Fs[Fs.length-1]/2 + 50);
				text("Is", (As.length-1)*lineWidth + 50, Is[Is.length-1]/2 + 50);
				text("Ps", (As.length-1)*lineWidth + 40, Ps[Ps.length-1]/2 + 50);
				text("NGs", (As.length-1)*lineWidth + 10, NGs[NGs.length-1]/2 + 50);
				for(int i = 0; i < As.length-1; i++){
					text(As[i], i*lineWidth, As[i]/2 + 50); text(As[i+1], (i+1)*lineWidth, As[i+1]/2 + 50);
					text(Bs[i], i*lineWidth, Bs[i]/2 + 50); text(Bs[i+1], (i+1)*lineWidth, Bs[i+1]/2 + 50);
					text(Cs[i], i*lineWidth, Cs[i]/2 + 50); text(Cs[i+1], (i+1)*lineWidth, Cs[i+1]/2 + 50);
					text(Ds[i], i*lineWidth, Ds[i]/2 + 50); text(Ds[i+1], (i+1)*lineWidth, Ds[i+1]/2 + 50);
					text(Ws[i], i*lineWidth, Ws[i]/2 + 50); text(Ws[i+1], (i+1)*lineWidth, Ws[i+1]/2 + 50);
					text(Fs[i], i*lineWidth, Fs[i]/2 + 50); text(Fs[i+1], (i+1)*lineWidth, Fs[i+1]/2 + 50);
					text(Is[i], i*lineWidth, Is[i]/2 + 50); text(Is[i+1], (i+1)*lineWidth, Is[i+1]/2 + 50);
					text(Ps[i], i*lineWidth, Ps[i]/2 + 50); text(Ps[i+1], (i+1)*lineWidth, Ps[i+1]/2 + 50);
					text(NGs[i], i*lineWidth, NGs[i]/2 + 50); text(NGs[i+1], (i+1)*lineWidth, NGs[i+1]/2 + 50);
					line(i*lineWidth, As[i]/2 + 50, (i+1)*lineWidth, As[i+1]/2 + 50);
					line(i*lineWidth, Bs[i]/2 + 50, (i+1)*lineWidth, Bs[i+1]/2 + 50);
					line(i*lineWidth, Cs[i]/2 + 50, (i+1)*lineWidth, Cs[i+1]/2 + 50);
					line(i*lineWidth, Ds[i]/2 + 50, (i+1)*lineWidth, Ds[i+1]/2 + 50);
					line(i*lineWidth, Ws[i]/2 + 50, (i+1)*lineWidth, Ws[i+1]/2 + 50);
					line(i*lineWidth, Fs[i]/2 + 50, (i+1)*lineWidth, Fs[i+1]/2 + 50);
					line(i*lineWidth, Is[i]/2 + 50, (i+1)*lineWidth, Is[i+1]/2 + 50);
					line(i*lineWidth, Ps[i]/2 + 50, (i+1)*lineWidth, Ps[i+1]/2 + 50);
					line(i*lineWidth, NGs[i]/2 + 50, (i+1)*lineWidth, NGs[i+1]/2 + 50);
				}
			}
		</script>
		<canvas></canvas>
	</body>
</html>